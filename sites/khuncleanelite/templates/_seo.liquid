<!-- Open Graph -->
<meta property="og:site_name" content="{{site.name}}">
<meta property="og:locale" content="{{site.locale | default: 'en_US'}}">
<meta property="og:url" content="{{current_url}}">
{% if post %}
<meta property="og:type" content="{% if post.type == 'blog' %}article{% else %}website{% endif %}">
<meta property="og:title" content="{{post.title}} | {{site.name}}">
<meta property="og:description" content="{{post.description | strip_html | truncate: 200}}">
<meta property="og:image" content="{{post.cover_image | resize: '1200x630'}}">
{% else %}
<meta property="og:type" content="website">
<meta property="og:title" content="{{meta_title | default: site.name}}">
<meta property="og:description" content="{{meta_description | default: site.description}}">
<meta property="og:image" content="{{site.logo | resize: '1200x630'}}">
{% endif %}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{post.title | default: meta_title | default: site.name}}">
<meta name="twitter:description" content="{{post.description | default: meta_description | default: site.description | strip_html | truncate: 200}}">
<meta name="twitter:image" content="{{post.cover_image | default: site.logo | resize: '1200x630'}}">

<!-- Geo Meta Tags -->
{% if site.settings.geo %}
<meta name="geo.region" content="{{site.country_code | upcase}}-{{site.region}}">
<meta name="geo.placename" content="{{site.city}}">
<meta name="geo.position" content="{{site.settings.geo.lat}};{{site.settings.geo.lng}}">
<meta name="ICBM" content="{{site.settings.geo.lat}}, {{site.settings.geo.lng}}">
{% endif %}

<!-- JSON-LD Structured Data -->
{% if post.type == 'category' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "{{post.title}}",
  "description": "{{post.description | strip_html | escape}}",
  "url": "{{current_url}}",
  "provider": {
    "@type": "LocalBusiness",
    "name": "{{site.name}}",
    "telephone": "{{site.phone}}",
    "email": "{{site.email}}",
    "url": "{{site_url}}",
    "image": "{{site.logo}}",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "{{site.address}}",
      "addressLocality": "{{site.city}}",
      "addressRegion": "{{site.region}}",
      "postalCode": "{{site.postal_code}}",
      "addressCountry": "{{site.country_code | upcase}}"
    }
    {% if site.settings.geo %}
    ,"geo": {
      "@type": "GeoCoordinates",
      "latitude": "{{site.settings.geo.lat}}",
      "longitude": "{{site.settings.geo.lng}}"
    }
    {% endif %}
  }
  {% if post.price > 0 %}
  ,"offers": {
    "@type": "Offer",
    "price": "{{post.price}}",
    "priceCurrency": "{{post.currency | default: 'THB'}}",
    "availability": "https://schema.org/InStock"
  }
  {% endif %}
  {% if post.cover_image %}
  ,"image": "{{post.cover_image | resize: '800x600'}}"
  {% endif %}
}
</script>

{% elsif post.type == 'blog' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{post.title}}",
  "description": "{{post.description | strip_html | escape}}",
  "image": "{{post.cover_image | resize: '1200x630'}}",
  "url": "{{current_url}}",
  "datePublished": "{{post.pubdate | date: '%Y-%m-%dT%H:%M:%S'}}",
  "dateModified": "{{post.updated_at | date: '%Y-%m-%dT%H:%M:%S'}}",
  "author": {
    "@type": "Organization",
    "name": "{{site.name}}",
    "url": "{{site_url}}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{site.name}}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{site.logo}}"
    }
  }
}
</script>

{% else %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "@id": "{{site_url}}/#business",
  "name": "{{site.name}}",
  "description": "{{site.description | escape}}",
  "url": "{{site_url}}",
  "telephone": "{{site.phone}}",
  "email": "{{site.email}}",
  "image": "{{site.logo}}",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "{{site.address}}",
    "addressLocality": "{{site.city}}",
    "addressRegion": "{{site.region}}",
    "postalCode": "{{site.postal_code}}",
    "addressCountry": "{{site.country_code | upcase}}"
  }
  {% if site.settings.geo %}
  ,"geo": {
    "@type": "GeoCoordinates",
    "latitude": "{{site.settings.geo.lat}}",
    "longitude": "{{site.settings.geo.lng}}"
  }
  ,"areaServed": {
    "@type": "City",
    "name": "{{site.city}}"
  }
  {% endif %}
  {% if site.settings.social %}
  ,"sameAs": [
    {% if site.settings.social.facebook %}"{{site.settings.social.facebook}}"{% endif %}
    {% if site.settings.social.instagram %},"{{site.settings.social.instagram}}"{% endif %}
  ]
  {% endif %}
}
</script>
{% endif %}

<!-- Breadcrumbs (for inner pages) -->
{% if post %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{site_url}}"
    },
    {% if post.type == 'category' %}
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Services",
      "item": "{{site_url}}/services"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{post.title}}",
      "item": "{{current_url}}"
    }
    {% elsif post.type == 'blog' %}
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Blog",
      "item": "{{site_url}}/blog"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{post.title}}",
      "item": "{{current_url}}"
    }
    {% else %}
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{post.title}}",
      "item": "{{current_url}}"
    }
    {% endif %}
  ]
}
</script>
{% endif %}
